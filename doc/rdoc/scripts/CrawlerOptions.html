<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf8" />
<title>Class: CrawlerOptions</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo; 
    
    
    <span class="title">CrawlerOptions</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: CrawlerOptions
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">CrawlerOptions</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/home/matthew/sources/projects/github/Poodle/scripts/lib/crawler.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Options
</p>


  </div>
</div>
<div class="tags">
  
</div>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_options-class_method" title="get_options (class method)">+ (Object) <strong>get_options</strong>(args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="get_options-class_method">
  
    + (<tt>Object</tt>) <strong>get_options</strong>(args) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/matthew/sources/projects/github/Poodle/scripts/lib/crawler.rb', line 210</span>

<span class='def def kw'>def</span> <span class='CrawlerOptions constant id'>CrawlerOptions</span><span class='dot token'>.</span><span class='get_options identifier id'>get_options</span><span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:ignore</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:logname</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:index</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_agent</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>&quot;Crawler/1.0&quot;</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:from</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>&quot;foo@bar.com&quot;</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:wait</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='integer val'>1</span>
    

    <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='OptionParser constant id'>OptionParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='opts identifier id'>opts</span><span class='bitor op'>|</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='banner identifier id'>banner</span> <span class='assign token'>=</span> <span class='string val'>&quot;(web) crawler for indexing content into Solr. To use a proxy, set http_proxy=http://foo:1234&quot;</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;&quot;</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-u URL&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--url URL&quot;</span><span class='comma token'>,</span> <span class='String constant id'>String</span><span class='comma token'>,</span> <span class='string val'>&quot;Initial URL to crawl&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='escape identifier id'>escape</span><span class='lparen token'>(</span><span class='u identifier id'>u</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-s URL&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--solr URL&quot;</span><span class='comma token'>,</span> <span class='String constant id'>String</span><span class='comma token'>,</span> <span class='string val'>&quot;URL to Solr&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:solr</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='escape identifier id'>escape</span><span class='lparen token'>(</span><span class='u identifier id'>u</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-t TEXT&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--title TEXT&quot;</span><span class='comma token'>,</span> <span class='String constant id'>String</span><span class='comma token'>,</span> <span class='string val'>&quot;Strip TEXT from the title&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:title_strip</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='u identifier id'>u</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-l NAME&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--log NAME&quot;</span><span class='comma token'>,</span> <span class='String constant id'>String</span><span class='comma token'>,</span> <span class='string val'>&quot;NAME of log file (else STDOUT)&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:logname</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='u identifier id'>u</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-a NAME&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--useragent NAME&quot;</span><span class='comma token'>,</span> <span class='String constant id'>String</span><span class='comma token'>,</span> <span class='string val'>&quot;User agent name&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_agent</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='u identifier id'>u</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-f FROM&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--from FROM&quot;</span><span class='comma token'>,</span> <span class='String constant id'>String</span><span class='comma token'>,</span> <span class='string val'>&quot;From details&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:from</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='u identifier id'>u</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-i x,y,z&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--ignore x,y,z&quot;</span><span class='comma token'>,</span> <span class='Array constant id'>Array</span><span class='comma token'>,</span> <span class='string val'>&quot;Ignore url's matching given patterns&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='list identifier id'>list</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:ignore</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='list identifier id'>list</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-w N&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--wait N&quot;</span><span class='comma token'>,</span> <span class='Integer constant id'>Integer</span><span class='comma token'>,</span> <span class='string val'>&quot;Wait N seconds between each fetch&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='n identifier id'>n</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:wait</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='n identifier id'>n</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-d D&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--depth D&quot;</span><span class='comma token'>,</span> <span class='Integer constant id'>Integer</span><span class='comma token'>,</span> <span class='string val'>&quot;Max depth to crawl&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='d identifier id'>d</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:depth</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='d identifier id'>d</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-e&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--index&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;Crawl AND index the content&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:index</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-q&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--quiet&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;Reduce log messages to informational only&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='q identifier id'>q</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:quiet</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='q identifier id'>q</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;--yuk&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;Horrible hack to fix poor CDATA termination, specific to a site - fix&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='y identifier id'>y</span><span class='bitor op'>|</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:yuk</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='y identifier id'>y</span> <span class='rbrace token'>}</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='on_tail identifier id'>on_tail</span><span class='lparen token'>(</span><span class='string val'>&quot;-h&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--help&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;Show this message&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
          <span class='puts identifier id'>puts</span> <span class='opts identifier id'>opts</span>
          <span class='exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='begin begin kw'>begin</span>
        <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='parse! fid id'>parse!</span><span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
        <span class='unless unless kw'>unless</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:url</span><span class='rbrack token'>]</span> <span class='and and kw'>and</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:solr</span><span class='rbrack token'>]</span>
            <span class='puts identifier id'>puts</span> <span class='string val'>&quot;You must specify a root url (-u) and a url to Solr (-s)&quot;</span>
            <span class='exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>-1</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
    <span class='rescue rescue kw'>rescue</span> <span class='OptionParser constant id'>OptionParser</span><span class='colon2 op'>::</span><span class='InvalidOption constant id'>InvalidOption</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
        <span class='puts identifier id'>puts</span> <span class='e identifier id'>e</span>
        <span class='exit identifier id'>exit</span><span class='lparen token'>(</span><span class='integer val'>-1</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    
    <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:solr</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='match op'>=~</span> <span class='regexp val'>/\/$/</span>
        <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:solr</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:solr</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span>

    <span class='options identifier id'>options</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue Oct 19 13:34:30 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.8.7).
</div>

  </body>
</html>